var medallions=[],dungeonImg=["Unknown","Rauru","Gohma","Dodongo","Jellyfish","PoeSisters","FireDancer","Clam","IronKnuckle","Gibdo"],fortresskeys=[],keyimg=["Membership0","Membership1","Membership2","Membership3","Membership4"],songs=[],songimg=["Unknown","Impa","Malon","SariasSong2","Guru","CompBro","TempleofTime","Forest","Crater","IceSong","Desert","BurningKak","Ocarina2"],questdungeons=[],questimg=["","MQ"];ganonlogic="Open",gerudobridge="Default",Rescue1=!0,smallkeys="Dungeons",bosskeys="Dungeons",skulltula="Off",scrubs="Off",showprizes=!1,quest="Vanilla",OcarinaShuffle=!1,SongShuffle=!1,WeirdEgg=!1,BombchuLogic=!1,OpenForest=!0,OpenGate=!0,OpenDoor=!0,OpenFountain=!1;var itemGrid=[],itemLayout=[],editmode=!1,selected={},dungeonSelect=0,dungeonMarked=-1;function setCookie(e){var t=new Date;t.setTime(t.getTime()+31536e6);var o="expires="+t.toUTCString(),n=JSON.stringify(e);document.cookie="key="+n+";"+o+";path=/"}function getCookie(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var o=e[t];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf("key="))return JSON.parse(o.substring("key=".length,o.length))}return{}}var cookiekeys=["map","iZoom","mZoom","mOrien","mPos","glogic","prize","items","qlogic","flogic","carp","smallk","bossk","sclogic","sklogic","ocShuff","sngShuff","eggShuff","chulogic","forest","gate","door","fountain"],cookieDefault={map:1,iZoom:100,mZoom:100,mPos:0,glogic:"Open",qlogic:"Vanilla",flogic:"Default",carp:1,smallk:"Dungeons",bossk:"Dungeons",sclogic:"Major Item",sklogic:"Off",prize:1,ocShuff:0,sngShuff:0,eggShuff:0,chulogic:0,forest:1,gate:1,door:1,fountain:0,items:defaultItemGrid},cookielock=!1;function loadCookie(){if(!cookielock){for(rbuttonID in cookielock=!0,cookieobj=getCookie(),cookiekeys.forEach(function(e){void 0===cookieobj[e]&&(cookieobj[e]=cookieDefault[e])}),initGridRow(JSON.parse(JSON.stringify(cookieobj.items))),document.getElementsByName("showmap")[0].checked=!!cookieobj.map,document.getElementsByName("showmap")[0].onchange(),document.getElementsByName("itemdivsize")[0].value=cookieobj.iZoom,document.getElementsByName("itemdivsize")[0].onchange(),document.getElementsByName("mapdivsize")[0].value=cookieobj.mZoom,document.getElementsByName("mapdivsize")[0].onchange(),document.getElementsByName("mapposition")[cookieobj.mPos].click(),document.getElementsByName("showprizes")[0].checked=!!cookieobj.prize,document.getElementsByName("showprizes")[0].onchange(),document.getElementsByName("OpenForest")[0].checked=!!cookieobj.forest,document.getElementsByName("OpenForest")[0].onchange(),document.getElementsByName("OpenGate")[0].checked=!!cookieobj.gate,document.getElementsByName("OpenGate")[0].onchange(),document.getElementsByName("OpenDoor")[0].checked=!!cookieobj.door,document.getElementsByName("OpenDoor")[0].onchange(),document.getElementsByName("OpenFountain")[0].checked=!!cookieobj.fountain,document.getElementsByName("OpenFountain")[0].onchange(),document.getElementsByName("OcarinaShuffle")[0].checked=!!cookieobj.ocShuff,document.getElementsByName("OcarinaShuffle")[0].onchange(),document.getElementsByName("SongShuffle")[0].checked=!!cookieobj.sngShuff,document.getElementsByName("SongShuffle")[0].onchange(),document.getElementsByName("WeirdEgg")[0].checked=!!cookieobj.eggShuff,document.getElementsByName("WeirdEgg")[0].onchange(),document.getElementsByName("BombchuLogic")[0].checked=!!cookieobj.chulogic,document.getElementsByName("BombchuLogic")[0].onchange(),document.getElementsByName("Rescue1")[0].checked=!!cookieobj.carp,document.getElementsByName("Rescue1")[0].onchange(),document.getElementsByName("ganonlogic"))rbutton=document.getElementsByName("ganonlogic")[rbuttonID],rbutton.value==cookieobj.glogic&&rbutton.click();for(rbuttonID in document.getElementsByName("quest"))rbutton=document.getElementsByName("quest")[rbuttonID],rbutton.value==cookieobj.qlogic&&rbutton.click();for(rbuttonID in document.getElementsByName("gerudobridge"))rbutton=document.getElementsByName("gerudobridge")[rbuttonID],rbutton.value==cookieobj.flogic&&rbutton.click();for(rbuttonID in document.getElementsByName("smallkeys"))rbutton=document.getElementsByName("smallkeys")[rbuttonID],rbutton.value==cookieobj.smallk&&rbutton.click();for(rbuttonID in document.getElementsByName("bosskeys"))rbutton=document.getElementsByName("bosskeys")[rbuttonID],rbutton.value==cookieobj.bossk&&rbutton.click();for(rbuttonID in document.getElementsByName("skulltula"))rbutton=document.getElementsByName("skulltula")[rbuttonID],rbutton.value==cookieobj.sklogic&&rbutton.click();for(rbuttonID in document.getElementsByName("scrubs"))rbutton=document.getElementsByName("scrubs")[rbuttonID],rbutton.value==cookieobj.sclogic&&rbutton.click();cookielock=!1}}function saveCookie(){if(!cookielock){for(rbuttonID in cookielock=!0,cookieobj={},cookieobj.map=document.getElementsByName("showmap")[0].checked?1:0,cookieobj.iZoom=document.getElementsByName("itemdivsize")[0].value,cookieobj.mZoom=document.getElementsByName("mapdivsize")[0].value,cookieobj.mPos=document.getElementsByName("mapposition")[1].checked?1:0,cookieobj.prize=document.getElementsByName("showprizes")[0].checked?1:0,cookieobj.forest=document.getElementsByName("OpenForest")[0].checked?1:0,cookieobj.gate=document.getElementsByName("OpenGate")[0].checked?1:0,cookieobj.door=document.getElementsByName("OpenDoor")[0].checked?1:0,cookieobj.fountain=document.getElementsByName("OpenFountain")[0].checked?1:0,cookieobj.ocShuff=document.getElementsByName("OcarinaShuffle")[0].checked?1:0,cookieobj.sngShuff=document.getElementsByName("SongShuffle")[0].checked?1:0,cookieobj.eggShuff=document.getElementsByName("WeirdEgg")[0].checked?1:0,cookieobj.chulogic=document.getElementsByName("BombchuLogic")[0].checked?1:0,cookieobj.carp=document.getElementsByName("Rescue1")[0].checked?1:0,document.getElementsByName("ganonlogic"))rbutton=document.getElementsByName("ganonlogic")[rbuttonID],rbutton.checked&&(cookieobj.glogic=rbutton.value);for(rbuttonID in document.getElementsByName("quest"))rbutton=document.getElementsByName("quest")[rbuttonID],rbutton.checked&&(cookieobj.qlogic=rbutton.value);for(rbuttonID in document.getElementsByName("gerudobridge"))rbutton=document.getElementsByName("gerudobridge")[rbuttonID],rbutton.checked&&(cookieobj.flogic=rbutton.value);for(rbuttonID in document.getElementsByName("smallkeys"))rbutton=document.getElementsByName("smallkeys")[rbuttonID],rbutton.checked&&(cookieobj.smallk=rbutton.value);for(rbuttonID in document.getElementsByName("bosskeys"))rbutton=document.getElementsByName("bosskeys")[rbuttonID],rbutton.checked&&(cookieobj.bossk=rbutton.value);for(rbuttonID in document.getElementsByName("skulltula"))rbutton=document.getElementsByName("skulltula")[rbuttonID],rbutton.checked&&(cookieobj.sklogic=rbutton.value);for(rbuttonID in document.getElementsByName("scrubs"))rbutton=document.getElementsByName("scrubs")[rbuttonID],rbutton.checked&&(cookieobj.sclogic=rbutton.value);cookieobj.items=JSON.parse(JSON.stringify(itemLayout)),setCookie(cookieobj),cookielock=!1}}function toggleChest(e){chests[e].isOpened=!chests[e].isOpened,chests[e].isOpened?document.getElementById(e).className="mapspan chest opened":document.getElementById(e).className="mapspan chest "+chests[e].isAvailable()}function highlight(e){document.getElementById(e).style.backgroundImage="url(images/highlighted.png)"}function unhighlight(e){document.getElementById(e).style.backgroundImage="url(images/poi.png)"}function highlightDungeon(e){document.getElementById("dungeon"+e).style.backgroundImage="url(images/highlighted.png)"}function unhighlightDungeon(e){dungeonSelect!=e&&(document.getElementById("dungeon"+e).style.backgroundImage="url(images/poi.png)")}function toggleMarkDungeon(e){window.event.preventDefault();var t=document.getElementById("dungeon"+e);t&&(t.classList.contains("wayofhero")?(t.classList.remove("wayofhero"),dungeonMarked=-1):(t.className+=" wayofhero",dungeonMarked=e))}function clickDungeon(e){document.getElementById("dungeon"+dungeonSelect).style.backgroundImage="url(images/poi.png)",dungeonSelect=e,document.getElementById("dungeon"+dungeonSelect).style.backgroundImage="url(images/highlighted.png)",document.getElementById("submaparea").innerHTML=dungeons[dungeonSelect].name,document.getElementById("submaparea").className="DC"+dungeons[dungeonSelect].isBeatable(),drawDungeonList()}function drawDungeonList(){var e=document.getElementById("submaplist");for(var t in e.innerHTML="",dungeons[dungeonSelect].chestlist){var o=document.createElement("li");o.innerHTML=t,dungeons[dungeonSelect].chestlist[t].isOpened?o.className="DCopened":dungeons[dungeonSelect].chestlist[t].isAvailable()?o.className="DCavailable":o.className="DCunavailable",o.onclick=new Function("toggleDungeonChest(this,"+dungeonSelect+',"'+t+'")'),o.onmouseover=new Function("highlightDungeonChest(this)"),o.onmouseout=new Function("unhighlightDungeonChest(this)"),o.style.cursor="pointer",e.appendChild(o)}}function bulkDCSelect(){const e=["available","all","none"],t=document.getElementById("submaparea");let o=t.getAttribute("data-select-mode"),n=e.indexOf(o);o=e[n=(n+1)%e.length],console.log(o),document.querySelectorAll("#submaplist li").forEach(function(e){dungeons[dungeonSelect].chestlist[e.innerHTML].isOpened=!1}),drawDungeonList(),"none"===o||("available"===o?document.querySelectorAll("#submaplist li.DCavailable").forEach(function(e,t){dungeons[dungeonSelect].chestlist[e.innerHTML].isOpened=!0}):"all"===o&&document.querySelectorAll("#submaplist li").forEach(function(e,t){dungeons[dungeonSelect].chestlist[e.innerHTML].isOpened=!0})),t.setAttribute("data-select-mode",o),drawDungeonList(),updateMap()}function toggleDungeonChest(e,t,o){dungeons[t].chestlist[o].isOpened=!dungeons[t].chestlist[o].isOpened,document.getElementById("submaparea").setAttribute("data-select-mode",null),dungeons[t].chestlist[o].isOpened?e.className="DCopened":dungeons[t].chestlist[o].isAvailable()?e.className="DCavailable":e.className="DCunavailable",updateMap()}function highlightDungeonChest(e){e.style.backgroundColor="#282828"}function unhighlightDungeonChest(e){e.style.backgroundColor=""}function setOrder(e){e?document.getElementById("layoutdiv").classList.remove("flexcontainer"):document.getElementById("layoutdiv").classList.add("flexcontainer"),saveCookie()}function showPrizes(e){showprizes=e.checked,updateGridItemAll(),saveCookie()}function setGanonLogic(e){ganonlogic=e.value,updateMap(),saveCookie()}function setQuest(e){quest=e.value,"Master"==quest?(questimg=1,itemsMax.ForestKey=6,itemsMax.FireKey=5,itemsMax.WaterKey=2,itemsMax.SpiritKey=7,itemsMax.ShadowKey=6,itemsMax.GTGKey=3,itemsMax.CastleKey=3,itemsMax.WellKey=2):"Mixed"==quest?questimg=1:(questimg=0,itemsMax.ForestKey=5,itemsMax.FireKey=8,itemsMax.WaterKey=6,itemsMax.SpiritKey=5,itemsMax.ShadowKey=5,itemsMax.GTGKey=9,itemsMax.CastleKey=2,itemsMax.WellKey=3),updateGridItemAll(),updateMap(),saveCookie()}function setFortressLogic(e){gerudobridge=e.value,"Start"==gerudobridge&&(items.Membership=!0),updateGridItemAll(),updateMap(),saveCookie()}function setCarpenter(e){Rescue1=e.checked,1==Rescue1&&keyimg>=2&&(keyimg=0),updateGridItemAll(),updateMap(),saveCookie()}function setSmallKeys(e){smallkeys=e.value,"Remove"==smallkeys&&(items.ForestKey=5,items.FireKey=8,items.WaterKey=6,items.ShadowKey=5,items.SpiritKey=5,items.CastleKey=2,items.GTGKey=9,items.WellKey=3),"Dungeons"==smallkeys&&(items.ForestKey=5,items.FireKey=8,items.WaterKey=6,items.ShadowKey=5,items.SpiritKey=5,items.CastleKey=2,items.GTGKey=9,items.WellKey=3),"Keysanity"==smallkeys&&(items.ForestKey=0,items.FireKey=0,items.WaterKey=0,items.ShadowKey=0,items.SpiritKey=0,items.CastleKey=0,items.GTGKey=0,items.WellKey=0),updateGridItemAll(),updateMap(),saveCookie()}function setBossKeys(e){bosskeys=e.value,"Remove"==bosskeys&&(items.BossForest=1,items.BossFire=1,items.BossWater=1,items.BossShadow=1,items.BossSpirit=1,items.BossCastle=1),"Dungeons"==bosskeys&&(items.BossForest=1,items.BossFire=1,items.BossWater=1,items.BossShadow=1,items.BossSpirit=1,items.BossCastle=1),"Keysanity"==bosskeys&&(items.BossForest=0,items.BossFire=0,items.BossWater=0,items.BossShadow=0,items.BossSpirit=0,items.BossCastle=0),updateGridItemAll(),updateMap(),saveCookie()}function setSkulltula(e){skulltula=e.value,updateMap(),saveCookie()}function setScrub(e){scrubs=e.value,updateMap(),saveCookie()}function setForest(e){OpenForest=e.checked,updateGridItemAll(),updateMap(),saveCookie()}function setGate(e){OpenGate=e.checked,updateGridItemAll(),updateMap(),saveCookie()}function setDoor(e){OpenDoor=e.checked,OpenDoor?itemsMin.MasterSword=1:itemsMin.MasterSword=0,items.MasterSword=itemsMin.MasterSword,updateGridItemAll(),updateMap(),saveCookie()}function setFountain(e){OpenFountain=e.checked,updateGridItemAll(),updateMap(),saveCookie()}function setOcarina(e){OcarinaShuffle=e.checked,0==OcarinaShuffle?itemsMin.Ocarina=1:itemsMin.Ocarina=0,items.Ocarina=itemsMin.Ocarina,updateGridItemAll(),saveCookie()}function setSongs(e){SongShuffle=e.checked,updateGridItemAll(),saveCookie()}function setEgg(e){WeirdEgg=e.checked,0==WeirdEgg?itemsMin.Mask=1:itemsMin.Mask=0,items.Mask=itemsMin.Mask,updateGridItemAll(),updateMap(),saveCookie()}function setBombchu(e){BombchuLogic=e.checked,updateMap(),saveCookie()}function setZoom(e,t){document.getElementById(e).style.zoom=t.value/100,document.getElementById(e).style.zoom=t.value/100,document.getElementById(e).style.MozTransform="scale("+t.value/100+")",document.getElementById(e).style.MozTransformOrigin="0 0",document.getElementById(e+"size").innerHTML=t.value+"%",saveCookie()}function showSettings(e){if(editmode){var t,o,n=!1;for(t=7;t>=0&&!n;t--)if(itemLayout[t]&&itemLayout[t].length){for(o=0;o<8;o++)if(itemLayout[t][o]&&"blank"!=itemLayout[t][o]){n=!0,t++;break}n||(itemGrid[t].row.style.display="none",itemGrid[t].half.style.display="none")}else itemGrid[t].row.style.display="none";for(;t>=0;t--)itemGrid[t].row.style.display="",itemGrid[t].button.style.display="none";editmode=!1,updateGridItemAll(),showTracker("mapdiv",document.getElementsByName("showmap")[0]),document.getElementById("itemconfig").style.display="none",e.innerHTML="🔧",saveCookie()}else{var i=document.getElementById("settings");i.style.display&&"none"!=i.style.display?(i.style.display="none",e.innerHTML="🔧"):(i.style.display="initial",e.innerHTML="X")}}function showTracker(e,t){t.checked?document.getElementById(e).style.display="":document.getElementById(e).style.display="none"}function clickRowButton(e){itemLayout[e].length%2==0?(itemGrid[e].button.innerHTML="-",itemGrid[e].button.style.backgroundColor="red",itemGrid[e][6].item.style.display="",itemGrid[e].half.style.display="none",itemLayout[e][6]="blank"):(itemGrid[e].button.innerHTML="+",itemGrid[e].button.style.backgroundColor="green",itemGrid[e][6].item.style.display="none",itemGrid[e].half.style.display="",document.getElementById(itemLayout[e][6]).style.opacity=1,itemLayout[e].splice(-1,1)),updateGridItem(e,6)}function EditMode(){var e;for(e=0;e<8;e++)itemGrid[e].row.style.display="",itemGrid[e].button.style.display="";editmode=!0,updateGridItemAll(),showTracker("mapdiv",{checked:!1}),document.getElementById("settings").style.display="none",document.getElementById("itemconfig").style.display="",document.getElementById("settingsbutton").innerHTML="Exit Edit Mode"}function createItemTracker(e){var t;for(t=0;t<8;t++){itemGrid[t]=[],itemLayout[t]=[],itemGrid[t].row=document.createElement("table"),itemGrid[t].row.className="tracker",e.appendChild(itemGrid[t].row);var o,n=document.createElement("tr");for(itemGrid[t].row.appendChild(n),itemGrid[t].half=document.createElement("td"),itemGrid[t].half.className="halfcell",n.appendChild(itemGrid[t].half),o=0;o<10;o++){itemGrid[t][o]=[],itemLayout[t][o]="blank",itemGrid[t][o].item=document.createElement("td"),itemGrid[t][o].item.className="griditem",n.appendChild(itemGrid[t][o].item);var i=document.createElement("table");i.className="lonk",itemGrid[t][o].item.appendChild(i);var s=document.createElement("tr");i.appendChild(s),itemGrid[t][o][0]=document.createElement("th"),itemGrid[t][o][0].className="corner",itemGrid[t][o][0].onclick=new Function("gridItemClick("+t+","+o+",0)"),s.appendChild(itemGrid[t][o][0]),itemGrid[t][o][1]=document.createElement("th"),itemGrid[t][o][1].className="corner",itemGrid[t][o][1].onclick=new Function("gridItemClick("+t+","+o+",1)"),s.appendChild(itemGrid[t][o][1]);var a=document.createElement("tr");i.appendChild(a),itemGrid[t][o][2]=document.createElement("th"),itemGrid[t][o][2].className="corner",itemGrid[t][o][2].onclick=new Function("gridItemClick("+t+","+o+",2)"),a.appendChild(itemGrid[t][o][2]),itemGrid[t][o][3]=document.createElement("th"),itemGrid[t][o][3].className="corner",itemGrid[t][o][3].onclick=new Function("gridItemClick("+t+","+o+",3)"),a.appendChild(itemGrid[t][o][3])}var l=document.createElement("td");l.className="halfcell",n.appendChild(l),itemGrid[t].button=document.createElement("button"),itemGrid[t].button.innerHTML="-",itemGrid[t].button.style.backgroundColor="red",itemGrid[t].button.style.color="white",itemGrid[t].button.onclick=new Function("clickRowButton("+t+")"),l.appendChild(itemGrid[t].button)}}function updateGridItem(e,t){var o=itemLayout[e][t];if(editmode)return o&&"blank"!=o?"boolean"==typeof items[o]?itemGrid[e][t].item.style.backgroundImage="url(images/"+o+".png)":itemGrid[e][t].item.style.backgroundImage="url(images/"+o+itemsMax[o]+".png)":itemGrid[e][t].item.style.backgroundImage="url(images/blank.png)",itemGrid[e][t].item.style.border="1px solid white",void(itemGrid[e][t].item.style.opacity=1);itemGrid[e][t].item.style.border="0px",itemGrid[e][t].item.style.opacity="",o&&"blank"!=o?("boolean"==typeof items[o]?itemGrid[e][t].item.style.backgroundImage="url(images/"+o+".png)":itemGrid[e][t].item.style.backgroundImage="url(images/"+o+items[o]+".png)",itemGrid[e][t].item.className="griditem "+!!items[o],void 0!==medallions[o]&&(showprizes?itemGrid[e][t][3].style.backgroundImage="url(images/"+dungeonImg[medallions[o]]+".png)":itemGrid[e][t][3].style.backgroundImage=""),void 0!==questdungeons[o]&&("Mixed"==quest?(questimg=1,itemGrid[e][t][0].style.backgroundImage="url(images/"+questimg[questdungeons[o]]+".png)"):"Master"==quest?(questimg=1,itemGrid[e][t][0].style.backgroundImage="url(images/MQ.png)"):(questimg=0,itemGrid[e][t][0].style.backgroundImage="")),void 0!==fortresskeys[o]&&("Keysanity"==smallkeys&&"Start"!=gerudobridge?itemGrid[e][t][3].style.backgroundImage="url(images/"+keyimg[fortresskeys[o]]+".png)":itemGrid[e][t][3].style.backgroundImage=""),void 0!==songs[o]&&(SongShuffle?itemGrid[e][t][3].style.backgroundImage="":itemGrid[e][t][3].style.backgroundImage="url(images/"+songimg[songs[o]]+".png)")):itemGrid[e][t].item.style.backgroundImage=""}function updateGridItemAll(){for(r=0;r<8;r++)for(c=0;c<10;c++)updateGridItem(r,c)}function setGridItem(e,t,o){itemLayout[t][o];itemLayout[t][o]=e,"blank"!=e&&(document.getElementById(e).style.opacity=.25),updateGridItem(t,o)}function initGridRow(e){var t,o;medallions={ForestMedallion:0,FireMedallion:0,WaterMedallion:0,ShadowMedallion:0,SpiritMedallion:0,LightMedallion:0,KokiriEmerald:0,GoronRuby:0,ZoraSapphire:0},fortresskeys={Membership:0},songs={ZeldasLullaby:0,EponasSong:0,SunsSong:0,SariasSong:0,SongofTime:0,SongofStorms:0,MinuetofForest:0,PreludeofLight:0,BoleroofFire:0,SerenadeofWater:0,NocturneofShadow:0,RequiemofSpirit:0},questdungeons={ForestKey:[],FireKey:[],WaterKey:[],SpiritKey:[],ShadowKey:[],CastleKey:[],WellKey:[],GTGKey:[]};var n=!1;for(t=7;t>=0&&!n;t--)if(e[t]&&e[t].length){for(o=0;o<10;o++)if(e[t][o]&&"blank"!=e[t][o]){n=!0,t++;break}n||(itemGrid[t].row.style.display="none",itemGrid[t].half.style.display="none")}else itemGrid[t].row.style.display="none",itemGrid[t].half.style.display="none";for(;t>=0;t--)for(itemGrid[t].row.style.display="",e[t].length%2!=0?(itemGrid[t].half.style.display="none",itemGrid[t][6].item.style.display=""):clickRowButton(t),itemGrid[t].button.style.display="none",o=0;o<10;o++)e[t][o]&&setGridItem(e[t][o],t,o)}function gridItemClick(e,t,o){if(editmode)if(selected.item){document.getElementById(selected.item).style.border="1px solid white";var n=itemLayout[e][t];if(n==selected.item)return void(selected={});if("blank"!=selected.item){var i,s;document.getElementById(selected.item).style.opacity=.25;var a=!1;for(i=0;i<8;i++){for(s=0;s<10;s++)if(itemLayout[i][s]==selected.item){itemLayout[i][s]="blank",a=!0;break}if(a)break}}itemLayout[e][t]=selected.item,updateGridItem(e,t),document.getElementById(n).style.opacity=1,selected={}}else if(void 0!==selected.row){itemGrid[selected.row][selected.col].item.style.border="1px solid white";var l=itemLayout[e][t];itemLayout[e][t]=itemLayout[selected.row][selected.col],itemLayout[selected.row][selected.col]=l,updateGridItem(e,t),updateGridItem(selected.row,selected.col),selected={}}else itemGrid[e][t].item.style.border="3px solid yellow",selected={row:e,col:t};else{var m=itemLayout[e][t];void 0!==medallions[m]?3==o?(medallions[m]++,medallions[m]>=10&&(medallions[m]=0)):2==o?(medallions[m]++,medallions[m]>=10&&(medallions[m]=0)):items[m]=!items[m]:void 0!==questimg[m]?"Mixed"==quest?o?(items.questdungeons[questimg]++,questdungeons[m]>=2&&(questdungeons[m]=0)):0==o?(items.questdungeons[questimg]++,questdungeons[m]>=2&&(questdungeons[m]=0)):items[m]=!items[m]:"Master"==quest?(questimg=1,questdungeons[m]++,questdungeons>=itemsMax&&(questdungeon[m]=0),questdungeons[m]=1):"Vanilla"==quest&&(questimg=0,questdungeons[m]>=itemsMax&&(questdungeons[m]=0),questdungeons[m]=0):void 0!==fortresskeys[m]?"Keysanity"==smallkeys?3==o?(fortresskeys[m]++,Rescue1&&fortresskeys[m]>=2&&(fortresskeys[m]=0),Rescue1||fortresskeys[m]>=5&&(fortresskeys[m]=0)):2==o?(fortresskeys[m]++,Rescue1?fortresskeys[m]>=2&&(fortresskeys[m]=0):Rescue1||fortresskeys[m]>=5&&(fortresskeys[m]=0)):items[m]=!items[m]:items[m]=!items[m]:void 0!==songs[m]?3==o?(songs[m]++,songs[m]>=13&&(songs[m]=0)):2==o?(songs[m]++,songs[m]>=13&&(songs[m]=0)):items[m]=!items[m]:"boolean"==typeof items[m]?items[m]=!items[m]:(items[m]++,items[m]>itemsMax[m]&&(items[m]=itemsMin[m])),updateMap(),updateGridItem(e,t)}}function updateMap(){for(k=0;k<chests.length;k++)chests[k].isOpened||(document.getElementById(k).className="mapspan chest "+chests[k].isAvailable());for(k=0;k<dungeons.length;k++){document.getElementById("dungeon"+k).className="mapspan dungeon "+dungeons[k].canGetChest()+(k===dungeonMarked?" wayofhero":" ");var e=0;for(var t in dungeons[k].chestlist)dungeons[k].chestlist.hasOwnProperty(t)&&!dungeons[k].chestlist[t].isOpened&&dungeons[k].chestlist[t].isAvailable()&&e++;for(var o=document.getElementById("dungeon"+k).firstChild;o;){if("chestCount"==o.className){o.innerHTML=0==e?"":e;break}o=o.nextSibling}}document.getElementById("submaparea").className="DC"+dungeons[dungeonSelect].isBeatable();var n=document.getElementById("submaplist").children;for(var i in n)n.hasOwnProperty(i)&&(dungeons[dungeonSelect].chestlist[n[i].innerHTML].isOpened?n[i].className="DCopened":dungeons[dungeonSelect].chestlist[n[i].innerHTML].isAvailable()?n[i].className="DCavailable":n[i].className="DCunavailable")}function itemConfigClick(e){var t=e.id;if(selected.item)document.getElementById(selected.item).style.border="0px",e.style.border="3px solid yellow",selected={item:t};else if(void 0!==selected.row){itemGrid[selected.row][selected.col].item.style.border="1px solid white";var o=itemLayout[selected.row][selected.col];if(o==t)return void(selected={});if("blank"!=t){var n,i;e.style.opacity=.25;var s=!1;for(n=0;n<8;n++){for(i=0;i<10;i++)if(itemLayout[n][i]==t){itemLayout[n][i]="blank",updateGridItem(n,i),s=!0;break}if(s)break}}itemLayout[selected.row][selected.col]=t,updateGridItem(selected.row,selected.col),document.getElementById(o).style.opacity=1,selected={}}else e.style.border="3px solid yellow",selected={item:t}}function populateMapdiv(){var e=document.getElementById("mapdiv");for(k=0;k<chests.length;k++){(i=document.createElement("span")).style.backgroundImage="url(images/poi.png)",i.style.color="black",i.id=k,i.onclick=new Function("toggleChest("+k+")"),i.onmouseover=new Function("highlight("+k+")"),i.onmouseout=new Function("unhighlight("+k+")"),i.style.left=chests[k].x,i.style.top=chests[k].y,chests[k].isOpened?i.className="mapspan chest opened":i.className="mapspan chest "+chests[k].isAvailable(),(t=document.createElement("span")).className="tooltip",t.innerHTML=chests[k].name,i.appendChild(t),e.appendChild(i)}for(k=0;k<dungeons.length;k++){(i=document.createElement("span")).style.backgroundImage="url(images/poi.png)",i.id="dungeon"+k,i.onclick=new Function("clickDungeon("+k+")"),i.onmouseover=new Function("highlightDungeon("+k+")"),i.onmouseout=new Function("unhighlightDungeon("+k+")"),i.oncontextmenu=new Function("toggleMarkDungeon("+k+")"),i.style.left=dungeons[k].x,i.style.top=dungeons[k].y,i.className="mapspan dungeon "+dungeons[k].canGetChest(),k===dungeonMarked&&(i.className+=" wayofhero");var t,o=0;for(var n in dungeons[k].chestlist)dungeons[k].chestlist.hasOwnProperty(n)&&!dungeons[k].chestlist[n].isOpened&&dungeons[k].chestlist[n].isAvailable()&&o++;(t=document.createElement("span")).className="chestCount",t.innerHTML=0==o?"":o,t.style.color="black",i.style.textAlign="center",t.display="inline-block",t.style.lineHeight="24px",i.appendChild(t),(t=document.createElement("span")).className="tooltipgray",t.innerHTML=dungeons[k].name,i.appendChild(t),e.appendChild(i)}for(var n in document.getElementById("submaparea").innerHTML=dungeons[dungeonSelect].name,document.getElementById("submaparea").className="DC"+dungeons[dungeonSelect].isBeatable(),document.getElementById("dungeon"+dungeonSelect).style.backgroundImage="url(images/highlighted.png)",dungeons[dungeonSelect].chestlist){var i;(i=document.createElement("li")).innerHTML=n,dungeons[dungeonSelect].chestlist[n].isOpened?i.className="DCopened":dungeons[dungeonSelect].chestlist[n].isAvailable()?i.className="DCavailable":i.className="DCunavailable",i.onclick=new Function("toggleDungeonChest(this,"+dungeonSelect+',"'+n+'")'),i.onmouseover=new Function("highlightDungeonChest(this)"),i.onmouseout=new Function("unhighlightDungeonChest(this)"),i.style.cursor="pointer",document.getElementById("submaplist").appendChild(i)}}function populateItemconfig(){var e,t=document.getElementById("itemconfig"),o=0;for(var n in items){o%10==0&&(e=document.createElement("tr"),t.appendChild(e)),o++;var i=document.createElement("td");i.className="corner",i.id=n,i.style.backgroundSize="100% 100%",i.onclick=new Function("itemConfigClick(this)"),"boolean"==typeof items[n]?i.style.backgroundImage="url(images/"+n+".png)":i.style.backgroundImage="url(images/"+n+itemsMax[n]+".png)",e.appendChild(i)}}function isBridgeOpen(){switch(ganonlogic){case"Open":return!0;case"Vanilla":return items.ShadowMedallion&&items.SpiritMedallion;case"Medallions":return items.ForestMedallion&&items.FireMedallion&&items.WaterMedallion&&items.LightMedallion&&items.ShadowMedallion&&items.SpiritMedallion;case"Dungeons":return items.KokiriEmerald&&items.GoronRuby&&items.ZoraSapphire&&items.ForestMedallion&&items.FireMedallion&&items.WaterMedallion&&items.LightMedallion&&items.ShadowMedallion&&items.SpiritMedallion}return!1}function isFortressOpen(){switch(gerudobridge){case"Default":case"Shuffle":return items.Membership;case"Start":return!0}return items.Membership}function isKeysanity(){switch(smallkeys){case"Remove":case"Dungeons":return!1;case"Keysanity":return!0}return!1}function init(){createItemTracker(document.getElementById("itemdiv")),populateMapdiv(),populateItemconfig(),loadCookie(),saveCookie()}function preloader(){for(item in items){if("boolean"==typeof items[item])(e=new Image).src="images/"+item+".png";else for(i=itemsMin[item];i<itemsMax[item];i++){(e=new Image).src="images/"+item+i+".png"}}for(medallion in dungeonImg){(e=new Image).src="images/"+dungeonImg[medallion]+".png"}for(questdungeon in questimg){var e;(e=new Image).src="images/"+questimg[questdungeon]+".png"}for(fortresskey in keyimg){new Image;e.src="images/"+keyimg[fortresskeys]+".png"}for(song in songimg){new Image;e.src="images/"+songimg[songs]+",png"}}function addLoadEvent(e){var t=window.onload;"function"!=typeof window.onload?window.onload=e:window.onload=function(){t&&t(),e()}}addLoadEvent(preloader);